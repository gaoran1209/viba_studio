# ğŸš€ Viba Studio éƒ¨ç½²æŒ‡å—ï¼ˆRender + Vercelï¼‰

## æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  ç”¨æˆ·æµè§ˆå™¨                                     â”‚
â”‚     â†“                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Vercel (å‰ç«¯)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        HTTPS è°ƒç”¨        â”‚
â”‚  â”‚ React + Vite â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  Render (åç«¯) â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                 â”‚
â”‚                                   PostgreSQL (Supabase) â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ éƒ¨ç½²æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ç”¨é€” |
|------|--------|
| `render.yaml` | Render åç«¯éƒ¨ç½²é…ç½® |
| `vercel.json` | Vercel å‰ç«¯éƒ¨ç½²é…ç½® |
| `.env.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ |

---

## æ­¥éª¤ 1ï¼šé…ç½® Supabase æ•°æ®åº“

1. è®¿é—® https://supabase.com
2. ç‚¹å‡» **New Project**
3. é¡¹ç›®åç§°ï¼š`viba-studio`
4. ç­‰å¾… 2-3 åˆ†é’Ÿ
5. è·å–è¿æ¥å­—ç¬¦ä¸²ï¼š
   - **Settings** â†’ **Database**
   - å¤åˆ¶ **Connection String (URI)**
   - æ ¼å¼ï¼š`postgresql://postgres.[é¡¹ç›®]:[å¯†ç ]@aws-0-ap-southeast-1.pooler.supabase.com:6543/postgres`

---

## æ­¥éª¤ 2ï¼šéƒ¨ç½²åç«¯åˆ° Render

### 2.1 è¿æ¥ GitHub

1. è®¿é—® https://dashboard.render.com
2. ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» **New** â†’ **Web Service**
4. é€‰æ‹©ä½ çš„ GitHub ä»“åº“ï¼š`gaoran1209/viba_studio`

### 2.2 é…ç½®æœåŠ¡

| é…ç½®é¡¹ | å€¼ |
|---------|-----|
| Name | `viba-studio-api` |
| Region | `Singapore`ï¼ˆç¦»ä¸­å›½è¿‘ï¼‰|
| Environment | `Node` |
| Branch | `main` |
| Root Directory | `backend` |
| Build Command | `npm install` |
| Start Command | `npm run build && npm start` |

### 2.3 æ·»åŠ ç¯å¢ƒå˜é‡

ç‚¹å‡» **Advanced** â†’ **Add Environment Variable**ï¼Œæ·»åŠ ä»¥ä¸‹ 5 ä¸ªå˜é‡ï¼š

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `PORT` | `3001` | å›ºå®š |
| `NODE_ENV` | `production` | å›ºå®š |
| `DATABASE_URL` | ä½ çš„ Supabase è¿æ¥å­—ç¬¦ä¸² | å¿…å¡« |
| `JWT_SECRET` | éšæœºç”Ÿæˆä¸€ä¸ª | å¿…å¡«ï¼Œå»ºè®®ç”¨ openssl rand -base64 32 |
| `JWT_REFRESH_SECRET` | å†éšæœºç”Ÿæˆä¸€ä¸ª | å¿…å¡« |
| `FRONTEND_URL` | `https://viba-studio.vercel.app` | å¿…å¡«ï¼Œéƒ¨ç½²åæ›´æ–° |

### 2.4 éƒ¨ç½²

ç‚¹å‡» **Create Web Service**ï¼Œç­‰å¾… 5-10 åˆ†é’Ÿã€‚

éƒ¨ç½²æˆåŠŸåï¼Œå¤åˆ¶åç«¯ URLï¼š`https://viba-studio-api.onrender.com`

---

## æ­¥éª¤ 3ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

### 3.1 è¿æ¥ GitHub

1. è®¿é—® https://vercel.com
2. ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» **Add New** â†’ **Project**
4. é€‰æ‹©ä½ çš„ GitHub ä»“åº“ï¼š`gaoran1209/viba_studio`

### 3.2 é…ç½®ç¯å¢ƒå˜é‡

åœ¨ **Environment Variables** ä¸­æ·»åŠ ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `VITE_API_URL` | `https://viba-studio-api.onrender.com` |

### 3.3 éƒ¨ç½²

ç‚¹å‡» **Deploy**ï¼Œç­‰å¾… 1-2 åˆ†é’Ÿã€‚

éƒ¨ç½²æˆåŠŸåï¼Œè®¿é—®ï¼š`https://viba-studio.vercel.app`

---

## æ­¥éª¤ 4ï¼šé…ç½® Supabase CORS

1. è®¿é—® Supabase Dashboard
2. **Settings** â†’ **Database**
3. æ‰¾åˆ° **Connection Pooling**
4. å°†ç«¯å£å·ä» `6543` æ”¹ä¸º `5432`ï¼ˆTransaction modeï¼‰

---

## éªŒè¯éƒ¨ç½²

| æ£€æŸ¥é¡¹ | URL |
|---------|-----|
| åç«¯å¥åº·æ£€æŸ¥ | `https://viba-studio-api.onrender.com/health` |
| å‰ç«¯è®¿é—® | `https://viba-studio.vercel.app` |
| æ³¨å†Œæµ‹è¯• | `https://viba-studio.vercel.app/register` |
| ç™»å½•æµ‹è¯• | `https://viba-studio.vercel.app/login` |

---

## ğŸ”„ æ›´æ–°ä»£ç åçš„è‡ªåŠ¨éƒ¨ç½²

é…ç½®å®Œæˆåï¼Œæ¯æ¬¡æ¨é€åˆ° GitHubï¼ŒRender å’Œ Vercel ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
git add .
git commit -m "æ–°åŠŸèƒ½"
git push origin main
```

è‡ªåŠ¨éƒ¨ç½²æµç¨‹ï¼š
1. ä»£ç æ¨é€åˆ° GitHub
2. Vercel æ£€æµ‹åˆ°å˜åŒ– â†’ è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²å‰ç«¯
3. Render æ£€æµ‹åˆ°å˜åŒ– â†’ è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²åç«¯
4. 2-5 åˆ†é’Ÿåè®¿é—®æœ€æ–°ç‰ˆæœ¬

---

## è´¹ç”¨è¯´æ˜

| æœåŠ¡ | å…è´¹è®¡åˆ’ | ä»˜è´¹è®¡åˆ’ |
|------|----------|----------|
| Render | 750 å°æ—¶/æœˆ | $7/æœˆï¼ˆåç«¯å‡çº§ï¼‰|
| Vercel | 100GB å¸¦å®½/æœˆ | $20/æœˆï¼ˆå‰ç«¯å‡çº§ï¼‰|
| Supabase | 500MB æ•°æ®åº“ | $25/æœˆï¼ˆæ•°æ®åº“å‡çº§ï¼‰|
| **åˆè®¡ï¼ˆå…è´¹ï¼‰** | **Â¥0/æœˆ** | **çº¦ Â¥370/æœˆ** |

---

## å¸¸è§é—®é¢˜

### Q: åç«¯å¯åŠ¨å¤±è´¥ï¼Ÿ
**A:** æ£€æŸ¥ `DATABASE_URL` æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ Supabase é¡¹ç›®æœªæš‚åœ

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Ÿ
**A:** æ£€æŸ¥ï¼š
1. Render åç«¯ URL æ˜¯å¦æ­£ç¡®
2. CORS é…ç½®æ˜¯å¦æ­£ç¡®
3. Vercel ç¯å¢ƒå˜é‡ `VITE_API_URL` æ˜¯å¦è®¾ç½®

### Q: ç™»å½•ååˆ·æ–°é¡µé¢ï¼Œæç¤ºæœªç™»å½•ï¼Ÿ
**A:** æ£€æŸ¥ `JWT_SECRET` æ˜¯å¦ä¸å‰ç«¯é…ç½®ä¸€è‡´

---

## ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥è€ƒè™‘ï¼š
1. é…ç½®è‡ªå®šä¹‰åŸŸå
2. æ·»åŠ é”™è¯¯ç›‘æ§ï¼ˆSentryï¼‰
3. é…ç½® CDN åŠ é€Ÿ
4. è®¾ç½® CI/CD è‡ªåŠ¨æµ‹è¯•
